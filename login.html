
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ChroniFy - Login</title>
        <meta name="description" content="Login to ChroniFy, a time management system. Sign in to manage your tasks efficiently.">
        <meta name="keywords" content="ChroniFy, time management, login, task management, productivity">
        <meta name="author" content="Your Name">
        <meta property="og:title" content="ChroniFy - Login">
        <meta property="og:description" content="Login to ChroniFy, a time management system. Sign in to manage your tasks efficiently.">
        <meta property="og:url" content="https://chronify-rbk.cyclic.app/login">
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "SoftwareApplication",
                "name": "ChroniFy",
                "description": "A task management system software",
                "applicationCategory": "Productivity",
                "operatingSystem": "Cross-platform",
                "url": "https://chronify-rbk.cyclic.app/login",
                "keywords": "task management, organization, productivity"
            }
        </script>
        <link rel="icon" href="data:image/png;base64,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" alt="flavicon" type="image/png">
        <link rel="canonical" href="https://chronify-rbk.cyclic.app">
        <link rel="stylesheet" type="text/css" href="./login.css">
    </head>
    <body>
        <center>
            <div id="header">
                <h1>ChroniFy</h1>
                <p>Time Management System</p>
            </div>
            <div id="loginForm">
                <h2>Welcome Back!</h2>
                <form id="loginForm" onsubmit="login(event)">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" name="username" 
                        required>

                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" name="password"
                        required>

                    <button type="submit">Login</button>
                </form>
                <p>Don't have an account? <a href="#"
                        onclick="toggleForm('registerForm')">Register</a></p>
            </div>

            <div id="registerForm" class="hidden">
                <h2>Register Here</h2>
                <form id="registerForm" onsubmit="register(event)" method="POST">
                    <label for="registerUsername">Username </label>
                    <input type="text" id="registerUsername" name="username"
                        required>

                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" name="password"
                        required>

                    <button type="submit">Register</button>
                </form>
                <p>Already have an account? <a href="#"
                        onclick="toggleForm('loginForm')">Login</a></p>
            </div>
        </center>

        <script>
            
            function toggleForm(formId) {
                document.getElementById('loginForm').classList.toggle('hidden', formId !== 'loginForm');
                document.getElementById('registerForm').classList.toggle('hidden', formId !== 'registerForm');
            }
        
            function login(event) {
                event.preventDefault();
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
            
                fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password,
                    }),
                })
                .then(response => {
                    console.log('Response Status:', response.status);
            
                    if (!response.ok) {
                        return response.json().then(errorData => {
                            console.error('Server error:', errorData);
                            return Promise.reject('Login failed');
                        });
                    }
                    return response.json(); // Assuming your server sends JSON data upon successful login
                })
                .then(data => {
                    console.log('Login successful:', data);
                    // Assuming your server sends a token in the response
                    if (data.token) {
                        localStorage.setItem('token', data.token);
                        window.location.href = '/';
                    } else {
                        console.error('Token not received from the server.');
                    }
                })
                .catch(error => {
                    alert('Login failed. Please try again.');
                    console.error('Login error:', error);
                });
            }
            
            function register(event) {
                event.preventDefault();
                const username = document.getElementById('registerUsername').value;
                const password = document.getElementById('registerPassword').value;
            
                console.log('Registering:', { username, password });
            
                fetch('/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password,
                    }),
                })
                .then(response => {
                    console.log('Response Status:', response.status);
                    return response.ok ? response.text() : Promise.reject('Registration failed');
                })
                .then(data => {
                    alert('Registration successful. Please login.');
                    console.log('Registration successful:', data);
                    // Handle successful registration, e.g., show a success message
                })
                .catch(error => {
                    console.error('Registration error:', error);
                    alert('Sorry! Username already exists');
                });
            }
            
        </script>
    </body>
</html>
